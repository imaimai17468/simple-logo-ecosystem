---
name: shunsaku
description: 瞬作（問診駆動プロトタイピング）。仮説検証のための最小プロトタイプを素早く作成するワークフロー。「瞬作」「プロトタイプ」「仮説検証」「MVP」「PoC」などの文脈で使用。各ゲートで最大3問の質問を通じて不確実性を管理し、縦切りの最小実装を行う。Flutter/Web対応。
---

# 瞬作（問診駆動プロトタイピング）

## 全体原則

- **確定/未確定/暫定前提** を常に分けて管理する
- 進行は「質問 → 確定 → 次へ」のゲート方式
- 各ゲートで **最大3問**（それ以上は情報価値が落ちる）
- 回答が得られない不確実性は暫定前提として宣言し、後で覆せるようにして進む

## AI内部検討：デザイン視点

各ゲートでAIは以下を**内部で検討**し、提案・判断に反映する（ユーザーには問わない）。

### ゲートA（目的と問い）での検討

- **発明ではなく発見か？**：ユーザーの仮説が「新しいものを作る」発想になっていないか確認。既にあるが見えていないものを探す問いに変換できるなら提案する
- **つなぐ視点**：仮説が「モノと人をつなぐ」観点を含んでいるか。含んでいなければ補完を検討

### ゲートC（スコープ確定）での検討

- **やりたいこと vs やるべきこと**：ユーザーの要望に「やりたいこと」が混入していないかチェック。検証に不要な機能は「やらないリスト」へ移動を提案
- **自己表現の排除**：デザイナーの個性を出す要素より、対象（ユーザー・仮説）に向き合う要素を優先

### ゲートE（観測設計）での検討

- **先回りの気遣い**：ユーザーが検証時に「あれを記録しておけばよかった」と後悔しないよう、観測項目を先回りで補完
- **気づかれない観測**：観測機能がユーザー体験を邪魔しないか確認。ログは裏側で静かに記録

### 実装フェーズでの検討

- **つなぐUI**：モノとユーザーが自然につながるインターフェースか。説明がなくても操作できるか
- **気づかれないデザイン**：過剰な装飾・説明・主張を削ぎ落とす。機能していることが意識されないUIを目指す
- **塑する対応**：実装中に状況が変わっても、本質（検証したい仮説）を見失わず柔軟に対応

## 不確実性台帳（毎ステップ更新）

各ステップで以下を出力・更新する：

```
✅確定：合意済み事項
❓未確定：判断に必要だが不明（質問候補）
🧪暫定前提：回答なしで仮置き（覆ったら何が変わるかも記載）
🚫禁止/非目標：やらないこと
🎯判定条件：合否ライン
🧷観測方法：ログ/計測/録画/比較方法
```

## ワークフロー

### ゲートA：目的と問いを確定（最大3問）

**目的**：瞬作の焦点を1点に固定

**質問例**：
1. 「一番確かめたい"仮説"は？（1文）」（導線/生成品質/速度/価値認知/継続利用意欲）
2. 「対象ユーザー/利用シーンは？（誰が/いつ/どこで）」
3. 「結果で取りうる意思決定は？（捨てる/伸ばす/転換）」

**確定すべきもの**：仮説（1〜2つ）、対象シーン、意思決定の型

**進行条件**：仮説が反証可能（外れたと言える条件がある）

**デザイン仮説判定**：
仮説が以下のようなデザインに関する不確実性の場合、ゲートE完了後に `/shunsaku-design` スキルを呼び出す：
- 「この見せ方でユーザーは理解できるか？」
- 「このレイアウトで迷わず操作できるか？」
- 「この色使いで信頼感を得られるか？」
- 「AとBどちらのデザインが良いか？」

---

### ゲートB：合否ライン確定（最大3問）

**目的**：「良さそう」を禁止、観測で決められる形に

**質問例**：
1. 「成功を数値/回数/時間で言うと？」（30秒以内、5回中4回成功など）
2. 「失敗の定義は？」
3. 「判定は誰がやる？」

**確定すべきもの**：合否ライン（Yes/No or 閾値）、失敗条件、評価者と手順

**進行条件**：判定条件が観測可能（ログ/計測/再現手順に落ちる）

---

### ゲートC：スコープ確定（最大3問）

**目的**：実装膨張を防ぐ

**質問例**：
1. 「ユーザーが辿る最短の1本の流れは？（開始→ゴール）」
2. 「絶対にやらない機能は？（認証・DB・課金・設定画面など）」
3. 「データは実データ？モック？固定入力？」

**確定すべきもの**：縦切り1本のフロー、やらないリスト、モック/スタブ方針

**進行条件**：やらないリストが明文化

---

### ゲートD：実行制約確定（最大3問）

**目的**：作れない理由で止まらないよう前提を詰める

**質問例**：
1. 「対象プラットフォームは？（iOS/Android/Web/CLI）」
2. 「コードは新規？既存リポジトリ？（触って良い範囲は？）」
3. 「外部API/鍵/課金が必要なものは使える？」

**確定すべきもの**：実行環境、触れる資産、外部依存の可否

**進行条件**：今日この場で動かせる構成になった（できなければ代替案を確定）

---

### ゲートE：観測の仕込み確定（最大3問）

**目的**：後で「何が起きたか分からない」を防ぐ

**質問例**：
1. 「何を記録する？（入力/出力/所要時間/失敗箇所/スクショ）」
2. 「比較対象はある？（既存版、競合、前の試作）」
3. 「再現手順は誰でも回せる形にする？」

**確定すべきもの**：ログ粒度、比較軸、再現手順の形

**進行条件**：判定条件に対応する観測が設計できた

---

### 実装フェーズ

**目的**：最短ループを通す

**デザイン仮説の場合**：
ゲートAでデザイン仮説と判定された場合、実装前に `/shunsaku-design` スキルを呼び出す。
デザインスキルからデザイントークンと検証シナリオを受け取り、実装スキルに渡す。

**行動規約**：
- まず「起動→操作→結果」を通す
- 設計の美しさや網羅性は後回し
- 追加質問は **ブロッカー限定**（最大1〜2問/回）

**スタック別実装**：
- Flutter（iOS/Android）→ `/shunsaku-impl-flutter` スキルを呼び出す
- Web（Next.js/React）→ `/shunsaku-impl-web` スキルを呼び出す
- デザイン検証が必要 → `/shunsaku-design` → 実装スキル

**ブロッカー質問例**：
- 「API鍵がないのでモックに切り替えて良い？」
- 「画面遷移が2案あるが、検証したいのはどちら？」

**成果物**：動くプロトタイプ（縦切り1本）、観測ログが出る状態、ドキュメント

---

### 評価フェーズ

**目的**：自己採点を避け、意思決定につなげる

**エージェントの役割**：
- 手順通りに実行し、観測結果を整理（数値・事実中心）
- 「事実→含意（推測）→次の仮説」を分離
- 解釈は控えめに

**人間の役割**：
- 合否を確定（閾値に照らして判断）
- 伸ばす/捨てる/転換を決める

**質問（最大3問）**：
1. 「判定：合格/不合格/保留 のどれ？」
2. 「保留なら追加で潰すべき不確実性は？（1つ）」
3. 「次は伸ばす？捨てる？転換？」

---

### DocDD還流（資産化）

**目的**：瞬作の価値を学びとして固定

**出力フォーマット**：

```
仮説：
試したこと（縦切り）：
観測（事実）：
結論（人間の合否）：
次の不確実性：
次の瞬作の問い：
捨てる/残す（コード・設定・メモ）：
```

---

## ドキュメント出力

### 問診完了時（ゲートE後）

#### 検証カード（VERIFICATION_CARD.md）

```markdown
# 検証カード

## 仮説
<!-- ゲートAで確定した仮説 -->

## 判定条件
| 項目 | 成功 | 失敗 |
|------|------|------|
| <!-- ゲートBで確定 --> | | |

## 観測方法
<!-- ゲートEで確定した記録項目 -->
-
-

## 判定者
<!-- 誰が合否を判断するか -->

## 検証手順
1.
2.
3.
```

#### DocDD還流テンプレート（DOCDD_RESULT.md）

```markdown
# DocDD還流記録

## 検証結果

| 項目 | 内容 |
|------|------|
| 仮説 | |
| 試したこと | |
| 判定 | 合格 / 不合格 / 保留 |

## 観測データ（事実）
<!-- 数値・事実のみ記載 -->

## 含意（推測）
<!-- 事実から読み取れること -->

## 次のアクション
- [ ] 伸ばす →
- [ ] 捨てる →
- [ ] 転換 →

## 次の瞬作の問い
<!-- 新たに生まれた仮説・疑問 -->

## 資産化
| 種別 | 残す/捨てる | 理由 |
|------|------------|------|
| コード | | |
| 設定 | | |
| 学び | | |
```

### 実装完了時

- **README.md** - 起動手順、操作方法、検証の進め方
- **docs/ARCHITECTURE.md** - アーキテクチャ概要
- **docs/DATA_FLOW.md** - データフロー
- **docs/COMPONENTS.md** - コンポーネント設計

※詳細テンプレートは各実装ガイドを参照

## 毎ターン出力テンプレ

```
1. ✅確定事項（箇条書き）
2. ❓未確定（優先度順）
3. 🧪暫定前提（今回置く前提）
4. 🔎今回の質問（最大3つ）
5. ▶次にやる作業（質問回答が揃ったらすぐ実行できる粒度）
```

## 質問の優先順位

1. **安全・法務・個人情報・鍵**（扱えないものを排除）
2. **合否ライン（判定条件）**（曖昧だと永遠に作る）
3. **やらないリスト（スコープ）**（膨張を止める）
4. **環境・素材・依存**（作れない詰まりを潰す）
5. **観測設計**（再現不能を防ぐ）

---

## スタック選定ロジック

ゲートDで「対象プラットフォーム」が確定した時点で、対応する実装スキルを呼び出す：

| キーワード | 実装スキル |
|-----------|-----------|
| Flutter, iOS, Android, モバイル | `/shunsaku-impl-flutter` |
| Web, Next.js, React, ブラウザ | `/shunsaku-impl-web` |
| CLI, コマンドライン, スクリプト | エージェント判断で実装 |
| その他/不明 | エージェント判断で実装 |

## デザイン検証ロジック

ゲートAで仮説がデザインに関するものと判定された場合、実装前に `/shunsaku-design` を呼び出す：

| 仮説の種類 | デザインスキル | 実装スキル |
|-----------|---------------|-----------|
| 機能仮説（デフォルト） | 不要 | 直接呼び出し |
| レイアウト・導線仮説 | `/shunsaku-design` | デザイントークン適用 |
| ビジュアル・トーン仮説 | `/shunsaku-design` | デザイントークン適用 |
| 理解・認知仮説 | `/shunsaku-design` | 検証シナリオ統合 |
| A/B比較仮説 | `/shunsaku-design` | 2案実装 |

## 実装共通規約

すべての実装は以下を遵守：

1. **コード出力**:
   - 動くプロトタイプ（縦切り1本）
   - 観測ログが出る状態
2. **ドキュメント出力**:
   - README.md
   - docs/ARCHITECTURE.md
   - docs/DATA_FLOW.md
   - docs/COMPONENTS.md
3. **DocDD還流形式の統一**: 評価フェーズ後の出力形式は共通

---

## ハンドオフ契約（実装サブスキルへの引き継ぎ）

ゲートA〜Eが完了したら、以下の形式で実装サブスキルに情報を引き継ぐ：

```yaml
shunsaku_handoff:
  # ゲートA: 目的と問い
  hypothesis: "検証したい仮説（1文）"
  target_user: "対象ユーザー"
  target_scene: "利用シーン"
  decision_type: "伸ばす|捨てる|転換"

  # ゲートB: 合否ライン
  success_criteria: "成功の定義（数値/回数/時間）"
  failure_criteria: "失敗の定義"
  evaluator: "判定者"

  # ゲートC: スコープ
  flow: "縦切り1本のフロー"
  not_doing: ["やらないリスト"]
  mock_policy: "モック/スタブ方針"

  # ゲートD: 実行制約
  target_stack: "flutter|web|cli|other"
  project_type: "new|existing"
  project_path: "プロジェクトパス"
  external_deps: "外部依存の可否"

  # ゲートE: 観測設計
  observation_items: ["記録する項目"]
  storage_method: "保存方法"
  comparison_target: "比較対象（あれば）"

  # デザイン（該当する場合）
  design_hypothesis: true|false
  design_spec_path: "デザインスペックのパス（該当時）"
```

---

## スキル関連図

```
┌─────────────────────────────────────────────────────────┐
│                      shunsaku                           │
│              （問診駆動プロトタイピング）                  │
│                                                         │
│  ゲートA → B → C → D → E → 実装フェーズ → 評価フェーズ    │
└───────────────────────┬─────────────────────────────────┘
                        │
        ┌───────────────┼───────────────┐
        │               │               │
        ▼               ▼               ▼
┌───────────────┐ ┌───────────┐ ┌───────────────┐
│shunsaku-design│ │impl-flutter│ │  impl-web     │
│ (デザイン仮説時)│ │            │ │               │
├───────────────┤ └─────┬─────┘ └───────┬───────┘
│  ┌─────────┐  │       │               │
│  │  btoc   │  │       ▼               ▼
│  ├─────────┤  │ ┌───────────┐ ┌───────────────┐
│  │  btob   │  │ │verify-    │ │ verify-web    │
│  └─────────┘  │ │flutter    │ │               │
└───────┬───────┘ └───────────┘ └───────────────┘
        │               ▲               ▲
        └───────────────┴───────────────┘
                  デザイントークン適用

                        │
                        ▼
               ┌─────────────────┐
               │ shunsaku-kaizen │
               │  （継続的改善）   │
               └─────────────────┘
```

**デザインスキル構成**:
- `shunsaku-design` - ルーター（コンテキスト判定）
- `shunsaku-design-btoc` - 消費者向け（感情訴求、遊び心）
- `shunsaku-design-btob` - 業務向け（効率性、信頼感）
